<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ARIA 로봇 알림 테스트</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #alert-box { border: 2px solid #ff4757; padding: 10px; margin-top: 20px; display: none; background: #ffeaa7; }
    </style>
</head>
<body>
    <h1>ARIA 로봇 관제 센터 (테스트용)</h1>
    <p>EC2 웹소켓 서버와 연결 중...</p>
    
    <div id="alert-box">
        <h3 style="margin:0;">새로운 알림 도착!</h3>
        <p id="alert-message"></p>
    </div>

    <script>
        // 1. EC2 서버(3000번 포트)로 웹소켓 연결 시도!
        const socket = io("http://43.201.110.86:3000");

        // 2. 연결이 성공하면 로그 띄우기
        socket.on("connect", () => {
            document.querySelector("p").innerText = "EC2 서버와 실시간 연결 성공! (알림 대기 중...)";
        });

        // 3. 서버에서 'robot_alert'라는 확성기 방송이 오면 화면에 띄우기!
        socket.on("robot_alert", (data) => {
            console.log("서버로부터 알림 도착:", data);
            const alertBox = document.getElementById("alert-box");
            const alertMessage = document.getElementById("alert-message");
            
            // 박스 보이게 하고, 내용 채우기
            alertBox.style.display = "block";
            alertMessage.innerText = JSON.stringify(data, null, 2);
        });
    </script>
</body>
</html>
